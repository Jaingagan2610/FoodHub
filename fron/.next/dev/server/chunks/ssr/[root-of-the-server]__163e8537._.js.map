{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gagan/OneDrive/Desktop/FoodHub/fron/src/lib/axios.ts"],"sourcesContent":["\r\nimport axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:4000\",\r\n  withCredentials: true,\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  if (typeof window !== \"undefined\") {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,iBAAiB;AACnB;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B;;IAMA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gagan/OneDrive/Desktop/FoodHub/fron/src/app/cart/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"@/lib/axios\";\r\nimport { Trash2, Plus, Minus, Link } from \"lucide-react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport type CartItem = {\r\n  id: string;\r\n  quantity: number;\r\n  price: number; // backend price snapshot\r\n  menuItem: {\r\n    id: string;\r\n    name: string;\r\n    image: string;\r\n    description: string;\r\n    price: number;\r\n  };\r\n};\r\n\r\nexport default function CartPage() {\r\n  const router = useRouter(); // NOW it works\r\n  const [cart, setCart] = useState<CartItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  \r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    const res = await api.get(\"/cart\");\r\n    console.log(\"resss\",res)\r\n    setCart(res.data);\r\n    setLoading(false);\r\n  };\r\n\r\n  const updateQuantity = async (id: string, qty: number) => {\r\n  if (qty < 1) return;\r\n\r\n  try {\r\n    const res = await api.put(`/cart/${id}`, {\r\n      quantity: qty\r\n    });\r\n\r\n    setCart((prev) =>\r\n      prev.map((item) =>\r\n        item.id === id ? { ...item, quantity: qty } : item\r\n      )\r\n    );\r\n  } catch (err) {\r\n    console.error(\"Update quantity error:\", err);\r\n  }\r\n};\r\n\r\n\r\n  // const removeItem = async (id: string) => {\r\n  //   const res = await api.delete(`/cart/${id}`);\r\n  //   setCart(res.data);\r\n  // };\r\n\r\n  // const total = cart?.reduce((acc, item) => acc + item.price * item.quantity, 0);\r\n\r\n  const removeItem = async (id: string) => {\r\n  await api.delete(`/cart/${id}`);\r\n  setCart(cart.filter((item) => item.id !== id));\r\n};\r\n\r\nconst total = (Array.isArray(cart) ? cart : []).reduce(\r\n  (acc, item) => acc + item.price * item.quantity,\r\n  0\r\n);\r\n\r\n  if (loading) return <p className=\"p-10 text-xl\">Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto px-6 py-10\">\r\n      <h1 className=\"text-4xl font-bold mb-6 text-black\">\r\n        Your <span className=\"text-orange-600\">Cart</span>\r\n      </h1>\r\n\r\n      {cart.length === 0 ? (\r\n        <p className=\"text-gray-500 text-lg\">Your cart is empty.</p>\r\n      ) : (\r\n        <div className=\"grid md:grid-cols-3 gap-8\">\r\n          \r\n          {/* Cart Items */}\r\n          <div className=\"md:col-span-2 space-y-6\">\r\n            {cart.map((item) => (\r\n              <div\r\n                key={item.id}\r\n                className=\"flex items-center gap-5 bg-white p-5 rounded-2xl shadow-md border\"\r\n              >\r\n                <img\r\n                  src={item?.menuItem?.image}\r\n                  alt={item?.menuItem?.name}\r\n                  className=\"w-28 h-28 rounded-xl object-cover\"\r\n                />\r\n\r\n                <div className=\"flex-1\">\r\n                  <h2  className=\"text-xl font-bold text-black\">{item?.menuItem?.name}</h2>\r\n\r\n                  <p  onClick={()=>{\r\n                    console.log(\"hello\",item)\r\n                  }} className=\"text-orange-600 font-semibold mt-1\">\r\n                    ₹ {item.price}\r\n                  </p>\r\n\r\n                  {/* Quantity */}\r\n                  <div className=\"flex items-center gap-3 mt-3 text-black\">\r\n  {/* Decrease */}\r\n  <button\r\n    onClick={() => updateQuantity(item.id, item.quantity - 1)}\r\n    className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300\"\r\n  >\r\n    <Minus className=\"w-4 h-4 text-black\" />\r\n  </button>\r\n\r\n  {/* Quantity number */}\r\n  <span className=\"text-lg font-semibold text-black\">\r\n    {item.quantity}\r\n  </span>\r\n\r\n  {/* Increase */}\r\n  <button\r\n    onClick={() => updateQuantity(item.id, item.quantity + 1)}\r\n    className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300\"\r\n  >\r\n    <Plus className=\"w-4 h-4 text-black\" />\r\n  </button>\r\n</div>\r\n\r\n                </div>\r\n\r\n                {/* Delete */}\r\n                <button\r\n                  onClick={() => removeItem(item.id)}\r\n                  className=\"text-red-600 hover:text-red-700\"\r\n                >\r\n                  <Trash2 className=\"w-6 h-6\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Summary */}\r\n          <div className=\"bg-white shadow-md border p-6 rounded-2xl h-fit\">\r\n            <h2 className=\"text-2xl font-bold text-black mb-4\">Order Summary</h2>\r\n\r\n            <div className=\"flex justify-between text-lg font-medium text-gray-800\">\r\n              <span>Total</span>\r\n              <span className=\"text-orange-600 font-bold\">₹ {total}</span>\r\n            </div>\r\n            <button\r\n            onClick={() => router.push(\"/checkout\")}\r\n      className=\"mt-6 w-full bg-orange-600 text-white py-3 rounded-xl font-semibold hover:bg-orange-700 transition\"\r\n    >\r\n      Proceed to Checkout\r\n    </button>\r\n   \r\n          </div>\r\n\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}