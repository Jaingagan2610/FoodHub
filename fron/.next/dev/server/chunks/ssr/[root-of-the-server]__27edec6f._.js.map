{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gagan/OneDrive/Desktop/FoodHub/fron/src/lib/axios.ts"],"sourcesContent":["\r\nimport axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:4000\",\r\n  withCredentials: true,\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  if (typeof window !== \"undefined\") {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;\r\n\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,iBAAiB;AACnB;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B;;IAMA,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gagan/OneDrive/Desktop/FoodHub/fron/src/app/dashboard/admin/orders/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"@/lib/axios\";\r\nimport { XCircle } from \"lucide-react\";\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\";\r\n\r\nexport default function AdminOrdersPage() {\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedOrderId, setSelectedOrderId] = useState<string | null>(null);\r\n  const openCancelDialog = (orderId: string) => {\r\n  setSelectedOrderId(orderId);\r\n};\r\nconst confirmCancelOrder = async () => {\r\n  if (!selectedOrderId) return;\r\n\r\n  try {\r\n    await api.put(`/orders/${selectedOrderId}/status`, {\r\n      status: \"cancelled\",\r\n    });\r\n\r\n    setOrders((prev) =>\r\n      prev.map((order) =>\r\n        order.id === selectedOrderId\r\n          ? { ...order, status: \"cancelled\" }\r\n          : order\r\n      )\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Failed to cancel order\", error);\r\n  } finally {\r\n    setSelectedOrderId(null);\r\n  }\r\n};\r\n\r\n  useEffect(() => {\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const res = await api.get(\"/orders\");\r\n        setOrders(res.data);\r\n      } catch (err) {\r\n        console.error(\"Failed to load orders\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  if (loading) return <p className=\"p-10 text-xl\">Loading orders...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6\">\r\n      <h1 className=\"text-4xl font-bold text-black mb-8\">\r\n        All Orders\r\n      </h1>\r\n\r\n      {orders.length === 0 && (\r\n        <p className=\"text-gray-600\">No orders found.</p>\r\n      )}\r\n\r\n      <div className=\"space-y-6\">\r\n        {orders.map((order) => (\r\n          <div\r\n            key={order.id}\r\n            className=\"bg-white border shadow-md rounded-2xl p-6\"\r\n          >\r\n            \r\n            {/* Header */}\r\n<div className=\"flex justify-between items-center mb-4\">\r\n  <div>\r\n    <p className=\"text-lg font-bold text-black\">\r\n      Order ID: {order.id}\r\n    </p>\r\n\r\n    <p className=\"text-gray-700\">\r\n      User: {order.user?.name || \"N/A\"}\r\n    </p>\r\n\r\n    {/* Restaurant Details */}\r\n    {order.items?.[0]?.menuItem?.restaurant && (\r\n      <div className=\"mt-2 text-gray-700 space-y-1\">\r\n        <p>\r\n          <strong>Restaurant:</strong>{\" \"}\r\n          <span className=\"text-black font-semibold\">\r\n            {order.items[0].menuItem.restaurant.name}\r\n          </span>\r\n        </p>\r\n\r\n        <p>\r\n          <strong>Location:</strong>{\" \"}\r\n          <span className=\"text-black\">\r\n            {order.items[0].menuItem.restaurant.location}\r\n          </span>\r\n        </p>\r\n\r\n        <p>\r\n          <strong>Country:</strong>{\" \"}\r\n          <span className=\"text-black\">\r\n            {order.items[0].menuItem.restaurant.country}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    )}\r\n  </div>\r\n\r\n  {/* Status Badge */}\r\n  <span\r\n    className={`px-4 py-1 rounded-full text-sm font-semibold ${\r\n      order.status === \"confirmed\"\r\n        ? \"bg-green-100 text-green-700\"\r\n        : order.status === \"cancelled\"\r\n        ? \"bg-red-100 text-red-700\"\r\n        : \"bg-yellow-100 text-yellow-700\"\r\n    }`}\r\n  >\r\n    {order.status}\r\n  </span>\r\n</div>\r\n\r\n\r\n            {/* Items */}\r\n            <div className=\"border-t pt-4 space-y-2\">\r\n              {order.items.map((item: any) => (\r\n                <div\r\n                  key={item.id}\r\n                  className=\"flex justify-between text-black\"\r\n                >\r\n                  <span>\r\n                    {item.menuItem.name} × {item.quantity}\r\n                  </span>\r\n                  <span>₹ {item.price * item.quantity}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"flex justify-between items-center mt-6\">\r\n              <p className=\"text-xl font-bold text-black\">\r\n                Total: ₹ {order.totalPrice}\r\n              </p>\r\n\r\n              {order.status !== \"cancelled\" && (\r\n                <button\r\n  onClick={() => openCancelDialog(order.id)}\r\n  className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700\"\r\n>\r\n  Cancel Order\r\n</button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Dialog open={!!selectedOrderId} onClose={() => setSelectedOrderId(null)}>\r\n  <DialogTitle>Cancel Order</DialogTitle>\r\n  <DialogContent>\r\n    Are you sure you want to cancel this order?\r\n  </DialogContent>\r\n  <DialogActions>\r\n    <Button onClick={() => setSelectedOrderId(null)}>No</Button>\r\n    <Button color=\"error\" onClick={confirmCancelOrder}>\r\n      Yes, Cancel\r\n    </Button>\r\n  </DialogActions>\r\n</Dialog>\r\n\r\n    </div>\r\n    \r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}